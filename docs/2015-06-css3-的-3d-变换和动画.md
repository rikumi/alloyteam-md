---
title: CSS3 的 3D 变换和动画
date: 2015-06-01
author: TAT.moonye
source_link: http://www.alloyteam.com/2015/06/css3%e7%9a%843d%e5%8f%98%e6%8d%a2%e5%92%8c%e5%8a%a8%e7%94%bb/
---

<!-- {% raw %} - for jekyll -->

## CSS3 的 3D 变换

### transform 属性

| attr                | des                  | css level |
| ------------------- | -------------------- | --------- |
| transform           | 向元素应用 2D 或 3D 转换。    | 3         |
| transform-origin    | 允许你改变被转换元素的位置。       | 3         |
| transform-style     | 规定被嵌套元素如何在 3D 空间中显示。 | 3         |
| perspective         | 规定 3D 元素的透视效果。       | 3         |
| perspective-origin  | 规定 3D 元素的底部位置。       | 3         |
| backface-visibility | 定义元素在不面对屏幕时是否可见。     | 3         |

### @transfrom 兼容性

IE10，firefox 以及 Opera 支持 @keyframe，而 chrome 和 safari 需要加浅醉 - webkit-，IE9 及早期 IE 版本是不支持的，所以这些功能一般是在移动端使用.

### 一个 demo

这个 div 会沿着 Y 轴旋转 130deg

```css
div
{
transform: rotateY(130deg);
}
 
```

### 一个 H5 上的应用场景

实现一个旋转木马的效果，这里列出核心代码，完整的后续放在 github 上

#### 核心是 css 代码

##### 一个 div 作为舞台的

```html
<div <span class="keyword">class</span>=<span class="string">"container"</span>>
</div>
.container {
    perspective: <span class="number">800</span>px; <span class="comment">//这里是一个视角的位置，</span>
}
 
```

> perspective 800px 是一个视角的位置，表示屏幕距离 3d 变化中心点的位置，一般是这个经验值，可以设置大一点，这样你看到的动画什么的就会离你很远。。。。

##### 一个容器

```html
<div <span class="keyword">class</span>=<span class="string">"container"</span>>
                <ul id=<span class="string">"js-course-list-3"</span> <span class="keyword">class</span>=<span class="string">"m-courseList"</span>></ul>
 </div>
 .m-courseList {
     transform-style: preserve-<span class="number">3</span>d;
 }
 
 
```

> preserve-3d 是透视属性，有了这个用户看到的效果才有空间感，没有的话看到的效果就和 2d 没区别了。

##### 所有卡片给到一个旋转的角度

用模板实现是很方便的一件事情

```html
style =
    "transform: rotateY(<%=opt.deg%>deg) translateZ(<%=opt.tz%>px);-webkit-transform: rotateY(<%=opt.deg%>deg) translateZ(<%=opt.tz%>px)";
```

> 默认情况下上面所有的卡片效果看起来是旋转了，但是都挤到一起去了，上面的 translateZ 是让每个卡片向它们的正前方平移一个具体的，这样看来才会形成一个类似立体圆柱的效果，也就是旋转木马的效果了

#### 要让它动起来，js 也少不了，在每次滑动结束后触发每个卡片的旋转

```html
$.map(M.lis, <span class="keyword">function</span>(item, i) {
            <span class="keyword">var</span> deg = Math.floor(<span class="number">360</spa
```


<!-- {% endraw %} - for jekyll -->